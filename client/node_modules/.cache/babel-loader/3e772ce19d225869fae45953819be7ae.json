{"ast":null,"code":"import axios from '../../axios';\nimport MyNotification from '../../utils/MyNotification';\nlet timer;\nexport const autoLogoutAction = user => dispatch => {\n  timer = setTimeout(() => {\n    MyNotification.danger('Token has been expired!');\n    dispatch(saveToRedux(null));\n  }, user.expiresIn);\n};\nexport const saveToRedux = user => {\n  clearTimeout(timer);\n  localStorage.setItem('user', user ? JSON.stringify(user) : null);\n  return {\n    payload: user,\n    type: 'user-state-changed'\n  };\n};\nexport const signInAction = formData => {\n  return dispatch => {\n    axios.post('/auth/signin', formData.values).then(res => {\n      dispatch(saveToRedux(res.data));\n      formData.onSuccess('Logged in successfully');\n    }).catch(formData.onFailure);\n  };\n};\nexport const signUpAction = formData => {\n  return dispatch => {\n    axios.post('/auth/signup', formData.values).then(res => {\n      dispatch(saveToRedux(res.data));\n      formData.onSuccess('Successfully created a new account');\n    }).catch(formData.onFailure);\n  };\n};\nexport const logoutAction = () => {\n  return dispatch => dispatch(saveToRedux(null));\n};","map":{"version":3,"sources":["/Users/amaro/Dropbox (Personal)/My Mac (Amaroâ€™s MacBook Pro)/Desktop/developer/meme-map/client/src/redux/actions/userActions.js"],"names":["axios","MyNotification","timer","autoLogoutAction","user","dispatch","setTimeout","danger","saveToRedux","expiresIn","clearTimeout","localStorage","setItem","JSON","stringify","payload","type","signInAction","formData","post","values","then","res","data","onSuccess","catch","onFailure","signUpAction","logoutAction"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,aAAlB;AACA,OAAOC,cAAP,MAA2B,4BAA3B;AAEA,IAAIC,KAAJ;AAEA,OAAO,MAAMC,gBAAgB,GAAIC,IAAD,IAAWC,QAAD,IAAc;AACvDH,EAAAA,KAAK,GAAGI,UAAU,CAAC,MAAM;AACxBL,IAAAA,cAAc,CAACM,MAAf,CAAsB,yBAAtB;AACAF,IAAAA,QAAQ,CAACG,WAAW,CAAC,IAAD,CAAZ,CAAR;AACA,GAHiB,EAGfJ,IAAI,CAACK,SAHU,CAAlB;AAIA,CALM;AAOP,OAAO,MAAMD,WAAW,GAAIJ,IAAD,IAAU;AACpCM,EAAAA,YAAY,CAACR,KAAD,CAAZ;AACAS,EAAAA,YAAY,CAACC,OAAb,CAAqB,MAArB,EAA6BR,IAAI,GAAGS,IAAI,CAACC,SAAL,CAAeV,IAAf,CAAH,GAA0B,IAA3D;AACA,SAAO;AACNW,IAAAA,OAAO,EAAEX,IADH;AAENY,IAAAA,IAAI,EAAE;AAFA,GAAP;AAIA,CAPM;AASP,OAAO,MAAMC,YAAY,GAAIC,QAAD,IAAc;AACzC,SAAQb,QAAD,IAAc;AACpBL,IAAAA,KAAK,CACHmB,IADF,CACO,cADP,EACuBD,QAAQ,CAACE,MADhC,EAEEC,IAFF,CAEQC,GAAD,IAAS;AACdjB,MAAAA,QAAQ,CAACG,WAAW,CAACc,GAAG,CAACC,IAAL,CAAZ,CAAR;AACAL,MAAAA,QAAQ,CAACM,SAAT,CAAmB,wBAAnB;AACA,KALF,EAMEC,KANF,CAMQP,QAAQ,CAACQ,SANjB;AAOA,GARD;AASA,CAVM;AAYP,OAAO,MAAMC,YAAY,GAAIT,QAAD,IAAc;AACzC,SAAQb,QAAD,IAAc;AACpBL,IAAAA,KAAK,CACHmB,IADF,CACO,cADP,EACuBD,QAAQ,CAACE,MADhC,EAEEC,IAFF,CAEQC,GAAD,IAAS;AACdjB,MAAAA,QAAQ,CAACG,WAAW,CAACc,GAAG,CAACC,IAAL,CAAZ,CAAR;AACAL,MAAAA,QAAQ,CAACM,SAAT,CAAmB,oCAAnB;AACA,KALF,EAMEC,KANF,CAMQP,QAAQ,CAACQ,SANjB;AAOA,GARD;AASA,CAVM;AAYP,OAAO,MAAME,YAAY,GAAG,MAAM;AACjC,SAAQvB,QAAD,IAAcA,QAAQ,CAACG,WAAW,CAAC,IAAD,CAAZ,CAA7B;AACA,CAFM","sourcesContent":["import axios from '../../axios';\nimport MyNotification from '../../utils/MyNotification';\n\nlet timer;\n\nexport const autoLogoutAction = (user) => (dispatch) => {\n\ttimer = setTimeout(() => {\n\t\tMyNotification.danger('Token has been expired!');\n\t\tdispatch(saveToRedux(null));\n\t}, user.expiresIn);\n};\n\nexport const saveToRedux = (user) => {\n\tclearTimeout(timer);\n\tlocalStorage.setItem('user', user ? JSON.stringify(user) : null);\n\treturn {\n\t\tpayload: user,\n\t\ttype: 'user-state-changed',\n\t};\n};\n\nexport const signInAction = (formData) => {\n\treturn (dispatch) => {\n\t\taxios\n\t\t\t.post('/auth/signin', formData.values)\n\t\t\t.then((res) => {\n\t\t\t\tdispatch(saveToRedux(res.data));\n\t\t\t\tformData.onSuccess('Logged in successfully');\n\t\t\t})\n\t\t\t.catch(formData.onFailure);\n\t};\n};\n\nexport const signUpAction = (formData) => {\n\treturn (dispatch) => {\n\t\taxios\n\t\t\t.post('/auth/signup', formData.values)\n\t\t\t.then((res) => {\n\t\t\t\tdispatch(saveToRedux(res.data));\n\t\t\t\tformData.onSuccess('Successfully created a new account');\n\t\t\t})\n\t\t\t.catch(formData.onFailure);\n\t};\n};\n\nexport const logoutAction = () => {\n\treturn (dispatch) => dispatch(saveToRedux(null));\n};\n"]},"metadata":{},"sourceType":"module"}